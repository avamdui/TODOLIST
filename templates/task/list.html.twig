{% extends 'base.html.twig' %}
{% block stylesheets %}
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
	<link href="{{ asset('css/kanban.css') }}" rel="stylesheet">
{% endblock %}

{% block header_img %}<img class="slide-image" src="{{ asset('img/todolist_content.jpg') }}" alt="todo list">
{% endblock %}

{% block body %}
	<section class="container">
		<div
			class="row">
			{# ---------------------------------------------------------------------------------------- #}
			<div class="col s6">
				<div class="col s12 m12">
					<div class="card red">
						<div class="card-content white-text">
							<span class="card-title center">TODO</span>
						</div>
						<div class="center white plus_jobs">
							<ul
								class="collection sorted-list" id="todo" data-info="sortable">
								{# -----------------------boucle------------------------------------------------ #}
								{% for task in tasks %}
									{% if task.isDone  == '0' %}
										<li id="task-{{ task.id }}" class="col-12" data-task-id="{{ task.id }}">
											<div class="thumbnail">
												<div class="caption">
													<h4 class="pull-right">
														<h4>
															<a href="{{ path('task_edit', {'id' : task.id }) }}">{{ task.title }}</a>
														</h4>
														<p class="text-muted small mb-0">Tache créer par :
															{{ task.user.username}}</p>
														<br>
														<p>{{ task.content }}</p>
													</h4>
												</div>
											</div>
											<hr></li>
									{% endif %}
								{% endfor %}
								<li id="hidden" style="display: none">
									<div>
										<div data-action="ajout" class="Card Zone-Ajout"></div>
									</div>
									<div class="card-body">
										{{ form_start(form, {'action' : path('task_create')}) }}
										<h4 class="card-title">
											{{form_row(form.title) }}</h4>
										<p class="card-text">{{form_row(form.content) }}</p>
										<button type="submit" class="btn btn-success pull-right">Ajouter</button>
										{{ form_end(form) }}
									</div>
									<hr>
								</li>
								{# -----------------------Fin de boucle------------------------------------------------------- #}
							</ul>
							{# -----------------------AJOUT DE TACHE------------------------------------------------ #}
							<button id="btnaddtask" class="btn btn-danger btn-sm pull-right">+</button>

							{# -----------------------FIN AJOUT------------------------------------------------ #}
						</div>
					</div>
				</div>
			</div>
			{# ---------------------------------------------------------------------------------------- #}
			<div class="col 6">
				<div class="col s12 m12">
					<div class="card green">
						<div class="card-content white-text">
							<span class="card-title center">DONE</span>
						</div>
						<div class="hidden"></div>
						<div class="center white plus_jobs">
							<ul class="collection sorted-list" id="done" data-info="sortable">
								{% for task in tasks %}
									{% if task.isDone %}
										<li id="task-{{ task.id }}" class="col-12" data-task-id="{{ task.id }}">
											<div class="thumbnail">
												<div class="caption">
													<h4 class="pull-right">
														<h4>
															<a href="{{ path('task_edit', {'id' : task.id }) }}">{{ task.title }}</a>
														</h4>
														<p class="text-muted small mb-0">Tache créer par :
															{{ task.user.username}}</p>
														<br>
														<p>{{ task.content }}</p>
													</h4>
												</div>
											</div>
											<hr></li>
									{% endif %}
								{% endfor %}
							</ul>
						</div>
					</div>
				</div>
			</div>
			{# ---------------------------------------------------------------------------------------- #}
		{# peut etre in progress #}
			{# ---------------------------------------------------------------------------------------- #}

		</div>
	</div>
{% endblock %}
{% block javascripts %}
	<script src="https://code.jquery.com/jquery-3.6.0.js"></script>

	<script type="text/javascript" src="{{ asset('js/jquery-ui-1.13.1.custom/jquery-ui.js') }}"></script>
	<script type="text/javascript" src="{{ asset('js/kanban.js') }}"></script>
{% endblock %}

{# <div> <button type="button" class="btn btn-success btn-sm pull-right">
{% if not task.isDone %}Marquer comme faite{% else %}Marquer non terminée
{% endif %}
</button>
</div>
<button id="btnDeleteTask" data-task-id="{{ task.id }}" class="btn btn-danger btn-sm pull-right">Supprimer</button>
</div> #}

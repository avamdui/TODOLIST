{% extends 'base.html.twig' %}
{% block stylesheets %}
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
	<link href="{{ asset('css/kanban.css') }}" rel="stylesheet">
{% endblock %}

{% block header_img %}<img class="slide-image" src="{{ asset('img/kanban-top.png') }}" alt="todo list">
{% endblock %}

{% block body %}
	<br>
	<section class="container">
		<div class="row boards">
			<h1>
				<i class="fa fa-th text-blue"></i>Mes taches</h1>
			{# ---------------------------------------------------------------------------------------- #}
			<div class="col 6">
				<div class="col s12 m12">
					<div class="card red">
						<div class="card-content white-text">
							<span class="card-title center">En cours</span>
						</div>
						<div class="center white plus_jobs">
							<ul class="collection sorted-list list-group" id="todo">
								{% for task in tasks %}
									{% if task.isDone =='0' %}
										<li id="task-{{ task.id }}" class="col-12 list-group-item-action" data-task-id=" {{ task.id }} ">
											<div class="card">
												<div class="row card-header">
													<h4 class="card-title col-6">{{ task.title }}
													</h4>
													<p class="text-muted small mb-0 col-6">par :
														{{ task.user.username}}</p>
												</div>
												<div class="card-body">

													<p class="card-text">{{ task.content }}</p>
												</div>
												<div class="card-footer bottom-card-todo d-flex flex-row-reverse">
													<a href="{{ path('task_edit', {'id' : task.id }) }}" class="btn btn-danger">
														<i class="fa-solid fa-trash-can"></i>
													</a>
													<a href="{{ path('task_edit', {'id' : task.id }) }}" class="btn btn-danger">
														<i class="fa-solid fa-pen-to-square"></i>
													</a>
												</div>
											</div>
										</li>

									{% endif %}
								{% endfor %}
								{# -----------------------Fin de boucle------------------------------------------------------- #}
								{# -----------------------DIV AJOUT------------------------------------------------ #}
								<div id="hidden" style="display: none">
									<div>
										<div data-action="ajout" class="Card Zone-Ajout"></div>
									</div>
									<div class="card">
										<div class="card-body">
											{{ form_start(form, {'action' : path('task_create')}) }}
											<div class="form-group row">
												<div class="col-5">
													<h6>Nom de la tache :
													</h6>
												</div>
												<div class="col-7">
													{{ form_widget(form.title) }}
												</div>
												<div class="form-group">
													<h6>Détails
													</h6>
													{{form_widget(form.content) }}
												</div>
												<button type="submit" class="btn btn-success pull-right">Ajouter</button>
												{{ form_end(form) }}
											</div>
										</div>
										<hr>
									</li>
								</div>
								{# -----------------------FIN DIV AJOUT------------------------------------------------ #}
							</ul>


						</div>
						{# -----------------------BOUTON AJOUT DE TACHE------------------------------------------------ #}
						<button id="btnaddtask" class="btn btn-danger btn-sm pull-right">Créer une tache</button>

						{# -----------------------FIN AJOUT------------------------------------------------ #}
					</div>
				</div>
			</div>
			{# ---------------------------------------------------------------------------------------- #}
			<div class="col 6">
				<div class="col s12 m12">
					<div class="card green">
						<div class="card-content white-text">
							<span class="card-title center">Faites</span>
						</div>
						<div class="center white plus_jobs">
							<ul class="collection sorted-list" id="done">
								{% for task in tasks %}
									{% if task.isDone %}
										<li id="task-{{ task.id }}" class="col-12 list-group-item-action" data-task-id=" {{ task.id }} ">
											<div class="card">
												<div class="row card-header">
													<h4 class="card-title col-6">{{ task.title }}
													</h4>
													<p class="text-muted small mb-0 col-6">par :
														{{ task.user.username}}</p>
												</div>
												<div class="card-body">
													<p class="card-text">{{ task.content }}</p>
												</div>
												<div class="card-footer bottom-card-todo d-flex flex-row-reverse">
													<a href="{{ path('task_edit', {'id' : task.id }) }}" class="btn btn-danger">
														<i class="fa-solid fa-trash-can"></i>
													</a>
													<a href="{{ path('task_edit', {'id' : task.id }) }}" class="btn btn-danger">
														<i class="fa-solid fa-pen-to-square"></i>
													</a>
												</div>
											</div>
										</li>
									{% endif %}
								{% endfor %}
							</ul>
						</div>
					</div>
				</div>
			</div>
			{# ---------------------------------------------------------------------------------------- #}
		{# peut etre in progress #}
			{# ---------------------------------------------------------------------------------------- #}
		</div>
	</div>
{% endblock %}
{% block javascripts %}
	<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
	<script type="text/javascript" src="{{ asset('js/jquery-ui-1.13.1.custom/jquery-ui.js') }}"></script>
	<script type="text/javascript" src="{{ asset('js/kanban.js') }}"></script>
{% endblock %}
{# <div> <button type="button" class="btn btn-success btn-sm pull-right">
																																																																																																								{% if not task.isDone %}Marquer comme faite{% else %}Marquer non terminée
																																																																																																								{% endif %}
																																																																																																								</button>
																																																																																																								</div>
																																																																																																								<button id="btnDeleteTask" data-task-id="{{ task.id }}" class="btn btn-danger btn-sm pull-right">Supprimer</button>
																																																																																																								</div> #}
